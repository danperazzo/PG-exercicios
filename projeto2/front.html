<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <link rel="stylesheet" href="styles.css">
<title>Título da página</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<canvas id="myCanvas" width="300" height="150" style="border:1px solid #d3d3d3;">
    Your browser does not support the HTML5 canvas tag.</canvas>

<h1>Projeto 2 - Curvas de Bezier</h1>

<button>Criar nova curva</button>
<button>Deletar curva atual</button>
<button>Editar curva atual</button>
<!-- Interação com as curvas, permitindo inserir, modificar e deletar pontos de controle -->

<p>Alternar Curvas:</p>

<button>left</button>
<button>right</button>

<p>Exibir/Esconder itens:</p>
<div>
  <input type="checkbox" id="control_points" name="scales"
         checked>
  <label for="scales">Pontos de controle</label>
</div>

<div>
  <input type="checkbox" id="polygons" name="horns">
  <label for="horns">Poligonos de controle</label>
</div>

<div>
    <input type="checkbox" id="curves" name="scales"
           >
    <label for="scales">Curvas</label>
  </div>
  

<script>
  function get_point_bezier(P, t) {

  var len = P.length
    
  if (len ==1){
      return P[0]
  }
  
  var intert_P = []
  
  for (i=1;i<len;i++){
  
      P_x = P[i][0]*t+P[i-1][0]*(1-t)
      P_y = P[i][1]*t+P[i-1][1]*(1-t)
      
      intert_P.push([P_x,P_y])
  
  }
  
  return get_point_bezier(intert_P, t)
  } 
  


  function draw_line(P1,P2){
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    ctx.beginPath();
    ctx.moveTo(P1[0], P1[1]);
    ctx.lineTo(P2[0], P2[1]);
    ctx.stroke();

  }

  var chkCurve = document.getElementById("curves");
  var chkPoly = document.getElementById("polygons");
  var chkCntrlPnt = document.getElementById("control_points");
  var control_points = [[100,0],[0,100],[100,100]]

  var function_draw = function () {

    var c = document.getElementById("myCanvas");
    const context = c.getContext('2d');
    context.clearRect(0, 0, c.width, c.height);

    if (chkCurve.checked) {
      var div_req = 5
      var div_t = []
      for(q=0;q<=5;q++){
        div_t.push(q/5)
      }
    
      var len = div_t.length
    
      var points = []
      for (j=0;j<len;j++){
        var point = get_point_bezier(control_points, div_t[j])
        points.push(point)
      }
    
      for (k=1;k<len;k++){
        draw_line(points[k-1],points[k])
      }
    }

    if(chkPoly.checked){
      for (k=1;k<control_points.length;k++){
        draw_line(control_points[k-1],control_points[k])
      }


    }
  
  };

  document.getElementById("curves").onclick = function_draw;
  document.getElementById("polygons").onclick = function_draw;
  




</script>
</body>
</html>